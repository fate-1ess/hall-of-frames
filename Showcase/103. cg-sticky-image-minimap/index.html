<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sticky Image Minimap | @Codegrid</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <nav>
      <a href="#">Linear</a>
      <button>Sign Up</button>
    </nav>
    <div class="container">
      <h1>
        Embark on a journey where every destination is a paradise, offering a
        symphony of colors, cultures, and experiences that enrich the soul.
        Travel with us, where the world unfolds in its most magnificent form,
      </h1>
    </div>

    <div class="gallery">
      <div class="minimap">
        <div class="preview"></div>
      </div>
      <div class="images">
        <div class="img">
          <img src="./assets/img1.jpg" alt="" />
        </div>
        <div class="img">
          <img src="./assets/img2.jpg" alt="" />
        </div>
        <div class="img">
          <img src="./assets/img3.jpg" alt="" />
        </div>
        <div class="img">
          <img src="./assets/img4.jpg" alt="" />
        </div>
        <div class="img">
          <img src="./assets/img5.jpg" alt="" />
        </div>
        <div class="img">
          <img src="./assets/img6.jpg" alt="" />
        </div>
        <div class="img">
          <img src="./assets/img7.jpg" alt="" />
        </div>
        <div class="img">
          <img src="./assets/img8.jpg" alt="" />
        </div>
        <div class="img">
          <img src="./assets/img9.jpg" alt="" />
        </div>
        <div class="img">
          <img src="./assets/img10.jpg" alt="" />
        </div>
      </div>
    </div>

    <div class="container">
      <h1>
        Explore a world where every horizon promises new wonders and each
        journey is a tapestry of breathtaking landscapes and timeless moments.
        With us, your travel transcends into a utopian adventure.
      </h1>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.3/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.3/ScrollTrigger.min.js"></script>
    <script>
          document.addEventListener('DOMContentLoaded', function() {
          const numberOfImages = 10;
          const minimap = document.querySelector('.minimap .preview');
          const fullSizeContainer = document.querySelector('.images');

          function getRandomLeft() {
              const values = [-15, -7.5, 0, 7.5, 15];
              return values[Math.floor(Math.random() * values.length)] + 'px';
          }

          minimap.innerHTML = '';
          fullSizeContainer.innerHTML = '';

          let activeThumbnail = null;

          for (let i = 1; i <= numberOfImages; i++) {
              const randomLeft = getRandomLeft();
              const imagePath = `./assets/img${i}.jpg`;

              const thumbnailDiv = document.createElement('div');
              thumbnailDiv.className = 'img-thumbnail';
              thumbnailDiv.style.left = randomLeft;
              const imgThumbnail = document.createElement('img');
              imgThumbnail.src = imagePath;
              thumbnailDiv.appendChild(imgThumbnail);
              minimap.appendChild(thumbnailDiv);

              const imgDiv = document.createElement('div');
              imgDiv.className = 'img';
              imgDiv.style.left = randomLeft;
              const imgFull = document.createElement('img');
              imgFull.src = imagePath;
              imgDiv.appendChild(imgFull);
              fullSizeContainer.appendChild(imgDiv);

              gsap.registerPlugin(ScrollTrigger);
              ScrollTrigger.create({
                  trigger: imgDiv,
                  start: "top center",
                  end: "bottom center",
                  onToggle: self => {
                      if (self.isActive) {
                          if (activeThumbnail && activeThumbnail !== thumbnailDiv) {
                              animateThumbnail(activeThumbnail, false);
                          }
                          animateThumbnail(thumbnailDiv, true);
                          activeThumbnail = thumbnailDiv;
                      } else if (activeThumbnail === thumbnailDiv) {
                          animateThumbnail(thumbnailDiv, false);
                      }
                  }
              });
          }

          function animateThumbnail(thumbnail, isActive) {
              gsap.to(thumbnail, {
                  border: isActive ? '1px solid rgba(255, 255, 255, 1)' : 'none',
                  opacity: isActive ? 1 : 0.5,
                  scale: isActive ? 1.3 : 1,
                  zIndex: isActive ? 10000 : 1,
                  duration: 0.3
              });
          }
      });
    </script>
  </body>
</html>

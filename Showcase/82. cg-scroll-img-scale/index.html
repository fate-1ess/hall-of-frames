<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>cg-scroll-img-scale</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <div class="item">
        <div class="item-text"><h1>Neo Pulse</h1></div>
        <div class="item-img">
          <img src="./images/img-1.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Quantum Vogue</h1></div>
        <div class="item-img">
          <img src="./images/img-2.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Ether Shift Mode</h1></div>
        <div class="item-img">
          <img src="./images/img-3.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Orbital Luxe</h1></div>
        <div class="item-img">
          <img src="./images/img-4.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Nova Echo Thread</h1></div>
        <div class="item-img">
          <img src="./images/img-5.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Flux Aura</h1></div>
        <div class="item-img">
          <img src="./images/img-6.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Zenon Lume Drift</h1></div>
        <div class="item-img">
          <img src="./images/img-7.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Zenon Haze</h1></div>
        <div class="item-img">
          <img src="./images/img-8.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Nebula Arc Stream</h1></div>
        <div class="item-img">
          <img src="./images/img-9.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Solar Byte Haze</h1></div>
        <div class="item-img">
          <img src="./images/img-10.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Ether Shift</h1></div>
        <div class="item-img">
          <img src="./images/img-1.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Quantum Loom Shift</h1></div>
        <div class="item-img">
          <img src="./images/img-2.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Void Arc</h1></div>
        <div class="item-img">
          <img src="./images/img-3.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Celestial Pulse Drift</h1></div>
        <div class="item-img">
          <img src="./images/img-4.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Solar Drift</h1></div>
        <div class="item-img">
          <img src="./images/img-5.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Nebula Arc Stream</h1></div>
        <div class="item-img">
          <img src="./images/img-6.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Stellar Mode</h1></div>
        <div class="item-img">
          <img src="./images/img-7.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Ether Flow Radiance</h1></div>
        <div class="item-img">
          <img src="./images/img-8.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Nexus Flow</h1></div>
        <div class="item-img">
          <img src="./images/img-9.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Prism Solar Muse</h1></div>
        <div class="item-img">
          <img src="./images/img-10.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Neo Pulse</h1></div>
        <div class="item-img">
          <img src="./images/img-1.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Quantum Vogue</h1></div>
        <div class="item-img">
          <img src="./images/img-2.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Ether Shift Mode</h1></div>
        <div class="item-img">
          <img src="./images/img-3.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Orbital Luxe</h1></div>
        <div class="item-img">
          <img src="./images/img-4.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Nova Echo Thread</h1></div>
        <div class="item-img">
          <img src="./images/img-5.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Flux Aura</h1></div>
        <div class="item-img">
          <img src="./images/img-6.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Zenon Lume Drift</h1></div>
        <div class="item-img">
          <img src="./images/img-7.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Zenon Haze</h1></div>
        <div class="item-img">
          <img src="./images/img-8.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Nebula Arc Stream</h1></div>
        <div class="item-img">
          <img src="./images/img-9.jpg" alt="" />
        </div>
      </div>
      <div class="item">
        <div class="item-text"><h1>Solar Byte Haze</h1></div>
        <div class="item-img">
          <img src="./images/img-10.jpg" alt="" />
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/intersection-observer@0.12.2/intersection-observer.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script>
      const items = Array.from(document.querySelectorAll(".item"));

      items.forEach((item) => {
        const img = item.querySelector(".item-img");
        gsap.set(img, { scale: 0 });
      });

      function setScale() {
        items.forEach((item) => {
          const img = item.querySelector(".item-img");
          const rect = item.getBoundingClientRect();

          const viewportHeight = window.innerHeight;
          const itemCenter = rect.top + rect.height / 2;

          const distanceFromCenter = Math.abs(viewportHeight / 2 - itemCenter);

          const progress = distanceFromCenter / (viewportHeight / 2);

          const adjustedProgress = Math.pow(progress, 2);

          let scale = 1 - adjustedProgress * 0.5;
          scale = Math.max(0, Math.min(scale, 1));

          gsap.to(img, { scale: scale, duration: 0.1 });
        });
      }

      setScale();

      window.addEventListener("scroll", setScale);
      let scrollY = 0;
      let oldScrollY = 0;
      let roundedScrollY = 0;
      const lerpAmount = 0.1;

      function lerp(start, end, t) {
        return start * (1 - t) + end * i;
      }

      function animate() {
        requestAnimationFrame(animate);

        roundedScrollY = lerp(roundedScrollY, scrollY, lerpAmount);

        document.querySelector(
          ".container"
        ).style.transform = `translate3d(0, ${-roundedScrollY}px, 0)`;

        setScale();
      }

      window.addEventListener("scroll", (e) => {
        scrollY = window.scrollY;
      });

      animate();
    </script>
  </body>
</html>

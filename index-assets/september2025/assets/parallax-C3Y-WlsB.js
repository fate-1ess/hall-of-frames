var m=function(t){return Array.prototype.slice.call(t)},d=function(){var t=window.navigator.userAgent,i=!!t.match(/iPad/i)||!!t.match(/iPhone/i),r=!!t.match(/WebKit/i);return i&&r&&!t.match(/CriOS/i)},u={scale:1.5,speed:1.5,wrapperClass:null,willChange:!1,externalRAF:!1},s=function(t,i){var r=this;if(this.element=t,this.wrapper=document.createElement("div"),this.options=Object.assign({},u,i),this.updateOptions(),this.vh=document.documentElement.clientHeight,this.isVisible=!1,this.damp=this.calcDamp(document.documentElement.clientWidth),this.elementTagName=t.tagName.toLowerCase(),this.elementTagName==="img"){var e=t.getAttribute("src");if(!e)return;(async function(o){var n=new Image;return n.src=o,await n.decode(),n})(e).then((function(){r.createParallax()}))}else this.createParallax()};s.prototype.createParallax=function(){this.setStyle(!0),this.wrapElement(),d()||this.createObserver()},s.prototype.updateOptions=function(){var t=this.element.getAttribute("data-u-scale"),i=this.element.getAttribute("data-u-speed"),r=this.element.getAttribute("data-u-willchange");t!==null&&(this.options.scale=Number(t)),i!==null&&(this.options.speed=Number(i)),r!==null&&(this.options.willChange=!0)},s.prototype.setStyle=function(t){t===void 0&&(t=!1);var i=this.element.clientHeight,r=this.element.clientWidth,e=window.getComputedStyle(this.element),o=e.position==="absolute",n=this.wrapper.style,a=this.element.style,l=this.options.scale;o&&e.marginRight!=="0px"&&e.marginLeft!=="0px"&&e.marginLeft===e.marginRight&&(n.margin="auto"),e.marginTop==="0px"&&e.marginBottom==="0px"||(n.marginTop=e.marginTop,n.marginBottom=e.marginBottom,a.marginTop="0",a.marginBottom="0"),e.inset!=="auto"&&(n.top=e.top,n.right=e.right,n.bottom=e.bottom,n.left=e.left,a.top="0",a.right="0",a.bottom="0",a.left="0"),e.transform!=="none"&&(n.transform=e.transform),e.zIndex!=="auto"&&(n.zIndex=e.zIndex),n.position=o?"absolute":"relative",e.gridArea!=="auto"&&e.gridArea!=="auto / auto / auto / auto"&&(n.gridArea=e.gridArea,a.gridArea="auto"),t&&(n.width="100%",n.overflow="hidden",a.display="block",a.overflow="hidden",a.backfaceVisibility="hidden",e.padding!=="0px"&&(a.padding="0"),this.elementTagName==="img"?a.objectFit="cover":this.elementTagName!=="video"&&(a.backgroundPosition="center")),e.borderRadius!=="0px"&&(n.borderRadius=e.borderRadius,n.isolation||(n.isolation="isolate"),e.marginLeft!=="0px"&&(n.marginLeft=e.marginLeft,a.marginLeft="0"),e.marginRight!=="0px"&&(n.marginRight=e.marginRight,a.marginRight="0"),n.width=r+"px"),o&&(n.width=r+"px",a.width="100%"),e.maxHeight!=="none"&&(n.maxHeight=e.maxHeight,a.maxHeight="none"),e.minHeight!=="0px"&&(n.minHeight=e.minHeight,a.minHeight="none"),a.width=r+"px",n.setProperty("height",i+"px","important"),a.setProperty("height",i*l+"px","important"),this.wrapperHeight=i,this.overflow=Math.floor(10*(i-i*l))/10},s.prototype.wrapElement=function(){var t=this.element.getAttribute("data-u-wrapper-class")||this.options.wrapperClass;t&&this.wrapper.classList.add(t);var i=this.element.closest("picture"),r=i!==null?i:this.element,e=r.parentNode;e!==null&&e.insertBefore(this.wrapper,r),this.wrapper.appendChild(r)},s.prototype.checkVisible=function(){var t=this.wrapper.getBoundingClientRect();t.bottom>0&&t.top<window.innerHeight?this.onEnter():this.onLeave()},s.prototype.createObserver=function(){var t=this;this.observer=new IntersectionObserver((function(i){i[0].isIntersecting?t.onEnter():t.onLeave()}),{root:null,rootMargin:"0px",threshold:0}),this.observer.observe(this.wrapper)},s.prototype.onEnter=function(){var t=this.element.style,i="transform";this.options.willChange&&t.willChange!==i&&(t.willChange=i),this.isVisible=!0},s.prototype.onLeave=function(){var t=this.element;this.options.willChange&&t.style.willChange==="transform"&&(t.style.willChange=""),this.isVisible=!1},s.prototype.calcTranslateValue=function(){var t=window.pageYOffset;t<0&&(t=0);var i=this.wrapper.getBoundingClientRect().top+t,r=(t+this.vh-i)/((this.vh+this.wrapperHeight)/100),e=Math.min(100,Math.max(0,r))/100,o=this.overflow,n=this.options.speed,a=(o*n-o)/2,l=o*(1-e)*n*this.damp-a;return Number(l.toFixed(4))},s.prototype.calcDamp=function(t){var i=this.options.scale,r=this.options.speed;if(!(r>=1.4||i>=1.4)||!(t<=1e3))return 1;i<1&&(i=1),r<1&&(r=1);var e=1.2-(1-(t/1e3+(3-(i+r)))),o=Math.max(.5,Math.min(1,e));return Math.floor(100*o)/100},s.prototype.applyParallax=function(){this.element.style.transform="translate3d(0 , "+this.calcTranslateValue()+"px , 0)"},s.prototype.animate=function(){d()&&this.checkVisible(),window.pageYOffset<0||this.isVisible&&this.applyParallax()},s.prototype.reset=function(){this.damp=this.calcDamp(window.innerWidth);var t=this.wrapper.style,i=this.element.style;this.vh=document.documentElement.clientHeight,t.width="",t.position="",t.height="100%",i.width="",this.elementTagName==="img"&&t.position==="absolute"&&(t.height="100%"),t.gridArea===""?i.height="":i.height="100%",t.margin!=="0px"&&(t.margin="",i.margin=""),t.inset!=="auto"&&(t.top="",t.right="",t.bottom="",t.left="",i.top="",i.right="",i.bottom="",i.left=""),t.transform!=="none"&&(t.transform="",i.transform=""),t.zIndex!=="auto"&&(t.zIndex=""),t.borderRadius!=="0px"&&(t.borderRadius="",t.isolation=""),this.setStyle(),this.applyParallax()},s.prototype.destroy=function(){var t;this.observer&&this.observer.disconnect(),this.wrapper.removeAttribute("style"),this.element.removeAttribute("style"),(t=this.wrapper).replaceWith.apply(t,this.wrapper.childNodes)};var h=function(t,i){if(!t)throw new Error("Argument 'elements' cannot be null.");var r,e;this.instances=[],this.externalRAF=i&&i.externalRAF||!1,this.onResizeEvent=this.resize.bind(this),r=typeof Promise<"u"&&Promise.toString().indexOf("[native code]")!==-1,e=typeof Element<"u"&&Element.prototype.closest,r&&e&&"IntersectionObserver"in window&&this.init((function(o){return Array.isArray(o)?o:typeof o=="string"?m(document.querySelectorAll(o)):o instanceof HTMLElement?[o]:o instanceof NodeList||o instanceof HTMLCollection?m(o):[o]})(t),i)};h.prototype.init=function(t,i){this.instances=t.map((function(r){return new s(r,i)})),this.externalRAF||this.animate(),navigator.userAgent.match(/(iPhone|iPad|iPod|Android)/)?window.addEventListener("orientationchange",this.onResizeEvent):window.addEventListener("resize",this.onResizeEvent)},h.prototype.animate=function(){this.instances.forEach((function(t){t.animate()})),this.externalRAF||(this.requestId=window.requestAnimationFrame(this.animate.bind(this)))},h.prototype.reset=function(){this.instances.forEach((function(t){t.reset()}))},h.prototype.resize=function(){clearTimeout(this.timer),this.timer=window.setTimeout(this.reset.bind(this),500),this.reset.bind(this)},h.prototype.destroy=function(){this.requestId&&window.cancelAnimationFrame(this.requestId),window.removeEventListener("resize",this.onResizeEvent),window.removeEventListener("orientationchange",this.onResizeEvent),this.instances.forEach((function(t){t.destroy()}))};let p=null;function c(){window.innerWidth>=1e3&&(p=new h('[data-parallax="true"] img',{scale:1.5,speed:.65,willChange:!0,wrapperClass:"ukiyo-wrapper",externalRAF:!1}))}function g(){p&&p.reset()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c();window.addEventListener("resize",g);

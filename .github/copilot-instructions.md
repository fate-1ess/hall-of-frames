# Copilot Instructions for CODEGRID

## Big picture
- Root `index.html`, `styles.css`, and `script.js` render the entire catalogue in vanilla browser APIs—there is no bundler or framework layer.
- Project metadata lives in auto-generated `projects.js` / `projects.json`; always regenerate with `node scripts/generate-projects.js` instead of editing by hand.
- The catalogue surfaces sub-projects from `Showcase/` and `Templates/`; static exports are mirrored into `index-assets/<project-id>/` for iframe previews.

## Front-end patterns
- `script.js` imports `PROJECTS`, `CATEGORY_MAP`, and `TECHNOLOGY_TAGS`; preserve these named exports (and public properties like `previewUrl`, `tags`, `relativePath`).
- Filtering and counts hinge on `state` keys (`category`, `stack`, `focus`, `query`) plus helpers `deriveStackKey` / `deriveFocusKey`; extend those heuristics when new groupings are needed.
- Project cards come from `<template id="project-card-template">`; sync template markup and `createProjectCard` logic together when adding UI elements.
- Hover previews load from `project.previewUrl`. For vanilla projects this now points directly to `Showcase/.../index.html`; for frameworks it references `index-assets/<project-id>/index.html` when a static export exists, otherwise the sidebar renders fallback instructions.

## CLI workflows
- **Inventory**: `node scripts/generate-projects.js` scans folders, infers tags (via `KEYWORD_TAGS`, file-extension sniffing, and dependency checks), and updates both data files.
- **Static builds**: `node scripts/build-projects.js [--project <id>] [--skip-install|--force-install|--clean]` installs, builds (`next build`/`next export`, `npm run build`, etc.), copies output into `index-assets`, and refreshes the inventory.
- **Next.js bootstrap**: `node scripts/bootstrap-next-export.js` drops an `output: 'export'` `next.config.js` when missing; review reported “existing” configs before overwriting manually.
- **Dev servers**: `node scripts/run-project.js <project-id|slug>` launches the inferred dev command with optional `--install`, `--script <name>`, `--open`, or `--list`.

## Asset & data conventions
- Vanilla projects are served from their source folders; ensure each directory contains an `index.html` so the generator can link directly to it.
- Framework exports still land in `index-assets/<project-id>/index.html`; missing builds surface a “run the dev server” message in the UI.
- When adjusting tag logic, update both `KEYWORD_TAGS` in the generator and any derived filter heuristics so the UI chips stay focused on high-signal keywords.

## Accessibility & UX notes
- The hero `<h1>` is plain text now; avoid reintroducing per-character spans that could disrupt the layout.
- Filter buttons rely on `[data-filter-button]` + `is-active`; any new filter group must update both the DOM data attributes and `renderCounts` tally logic.

## Quality checklist
- After changing scripts, rerun `node scripts/generate-projects.js`; commit both `projects.js` and `projects.json` to avoid stale inventories.
- Serve the root via `npx http-server .` to validate iframe previews, hover transitions (`presentPreview` / `animatePreviewSwap`), and the “requires server” messaging.
- Large data files (`projects.js`, `projects.json`) are formatted via `toJs`/`JSON.stringify`—avoid reformatters that strip the autogenerated header comment.
